(()=>{var t={250:()=>{},673:(t,e,s)=>{"use strict";var a=s(471),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AppHeader"),e("main",[e("router-view")],1),e("AppFooter")],1)},o=[],n=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header",class:{scrolled:t.isScrolled}},[e("div",{staticClass:"container"},[t._m(0),e("nav",{staticClass:"navigation",class:{open:t.menuOpen}},[e("ul",[e("li",[e("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),e("li",[e("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),t.isAuthenticated?e("li",[e("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")])],1):t._e(),t.isAuthenticated?e("li",[e("router-link",{attrs:{to:"/profile"}},[t._v("Profile")])],1):t._e(),t.isAuthenticated?t._e():e("li",[e("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1),t.isAuthenticated?e("li",[e("router-link",{attrs:{to:"/create-post"}},[t._v("Create Post")])],1):t._e(),t.isAuthenticated?e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logoutUser.apply(null,arguments)}}},[t._v("Logout")])]):t._e()])]),e("div",{staticClass:"menu-toggle",on:{click:t.toggleMenu}},[e("span"),e("span"),e("span")])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("h1",[t._v("Trillow")])])}],l=s(353);const c={name:"AppHeader",data(){return{menuOpen:!1,isScrolled:!1}},computed:{...(0,l.L8)(["isAuthenticated"])},methods:{...(0,l.i0)(["logout"]),logoutUser(){this.logout().then((()=>{this.$router.push("/login")}))},toggleMenu(){this.menuOpen=!this.menuOpen},handleScroll(){this.isScrolled=window.scrollY>50}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)}},u=c;var d=s(656),p=(0,d.A)(u,n,i,!1,null,"3a93bdbf",null);const m=p.exports;var v=function(){var t=this;t._self._c;return t._m(0)},g=[function(){var t=this,e=t._self._c;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"container"},[e("div",{staticClass:"footer-content"},[e("div",{staticClass:"footer-logo"},[e("h1",[t._v("My App")])]),e("nav",{staticClass:"footer-navigation"},[e("ul",[e("li",[e("a",{attrs:{href:"#"}},[t._v("Privacy Policy")])]),e("li",[e("a",{attrs:{href:"#"}},[t._v("Terms of Service")])]),e("li",[e("a",{attrs:{href:"#"}},[t._v("Contact")])])])]),e("div",{staticClass:"social-media"},[e("a",{attrs:{href:"#","aria-label":"Facebook"}},[e("i",{staticClass:"fab fa-facebook-f"})]),e("a",{attrs:{href:"#","aria-label":"Twitter"}},[e("i",{staticClass:"fab fa-twitter"})]),e("a",{attrs:{href:"#","aria-label":"Instagram"}},[e("i",{staticClass:"fab fa-instagram"})])])]),e("p",{staticClass:"footer-copy"},[t._v("Â© 2024 My App. All rights reserved.")])])])}];const h={name:"AppFooter"},f=h;var _=(0,d.A)(f,v,g,!1,null,"3869d4ed",null);const b=_.exports,y={name:"App",components:{AppHeader:m,AppFooter:b}},C=y;var w=(0,d.A)(C,r,o,!1,null,null,null);const k=w.exports;var A,P,F=s(173),x=s(250),D=s.n(x),S={},$=(0,d.A)(S,A,P,!1,null,null,null);"function"===typeof D()&&D()($);const q=$.exports;var T=function(){var t=this;t._self._c;return t._m(0)},N=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("h1",[t._v("About Page")]),e("p",[t._v("Learn more about us on this page.")])])}];const E={name:"AboutPage"},R=E;var L=(0,d.A)(R,T,N,!1,null,"15fac7cc",null);const U=L.exports;var O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("div",{staticClass:"login-container"},[e("div",{staticClass:"form-section"},[e("h1",[t._v("Welcome Back")]),e("p",{staticClass:"subtitle"},[t._v("Please login to continue")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("button",{staticClass:"login-button",attrs:{type:"submit"}},[t._v("Login")])]),t.errorMessage?e("p",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e(),t.resetPasswordLink?e("p",{staticClass:"reset-link"},[t._v(" Forgot your password? "),e("router-link",{attrs:{to:{name:"ResetPasswordRequest"}}},[t._v("Reset it here")])],1):t._e(),"Email not verified. Please check your email to verify your account."===t.errorMessage?e("p",[t._v(" Didn't receive an email? "),e("button",{on:{click:t.resendVerificationEmail}},[t._v("Resend Verification Email")])]):t._e(),e("p",{staticClass:"signup-text"},[t._v("Don't have an account? "),e("router-link",{attrs:{to:"/signup"}},[t._v("Sign Up")])],1)])])])},M=[],I=s(335);const B=I.A.create({baseURL:"http://127.0.0.1:5000/api",headers:{"Content-Type":"application/json"}});B.interceptors.request.use((t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t}));const j=B,z={data(){return{username:"",password:"",errorMessage:"",resetPasswordLink:!1}},methods:{async submitForm(){this.errorMessage="",this.resetPasswordLink=!1;try{const t=await j.post("/login",{email:this.username,password:this.password});t.data.token?(localStorage.setItem("token",t.data.token),this.$store.dispatch("login",t.data.token),this.$router.push("/dashboard")):this.errorMessage=t.data.message||"An error occurred. Please try again."}catch(t){t.response&&401===t.response.status&&"Email not confirmed"===t.response.data.message?this.errorMessage="Email not verified. Please check your email to verify your account.":t.response&&404===t.response.status?this.errorMessage="User not found. Please register first.":t.response&&401===t.response.status?(this.errorMessage=t.response.data.message,this.resetPasswordLink=!0):this.errorMessage=t.response?t.response.data.message:"An error occurred. Please try again."}},async resendVerificationEmail(){try{const t=await j.post("/resend-verification",{email:this.username});alert(t.data.message)}catch(t){t.response&&429===t.response.status?alert("You have exceeded the number of allowed requests. Please try again later."):alert(t.response?t.response.data.message:"An error occurred. Please try again.")}}}},H=z;var Y=(0,d.A)(H,O,M,!1,null,"1ccb9ef6",null);const V=Y.exports;var J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auth-page"},[e("div",{staticClass:"auth-container"},[e("div",{staticClass:"form-section"},[e("h1",[t._v("Join Our Community")]),e("p",{staticClass:"subtitle"},[t._v("Create your account in just a few easy steps")]),e("form",{attrs:{"aria-live":"polite"},on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[1===t.step?e("div",{key:"step1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"fullname"}},[t._v("Full Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fullname,expression:"fullname"}],attrs:{type:"text",id:"fullname",required:""},domProps:{value:t.fullname},on:{input:function(e){e.target.composing||(t.fullname=e.target.value)}}})]),e("button",{staticClass:"next-button",attrs:{type:"button"},on:{click:t.nextStep}},[t._v(" Next ")])]):t._e(),2===t.step?e("div",{key:"step2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"button-group"},[e("button",{staticClass:"prev-button",attrs:{type:"button"},on:{click:t.prevStep}},[t._v(" Back ")]),e("button",{staticClass:"next-button",attrs:{type:"button"},on:{click:t.nextStep}},[t._v(" Next ")])])]):t._e(),3===t.step?e("div",{key:"step3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email Address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),e("div",{staticClass:"button-group"},[e("button",{staticClass:"prev-button",attrs:{type:"button"},on:{click:t.prevStep}},[t._v(" Back ")]),e("button",{staticClass:"next-button",attrs:{type:"button"},on:{click:t.nextStep}},[t._v(" Next ")])])]):t._e(),4===t.step?e("div",{key:"step4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"button-group"},[e("button",{staticClass:"prev-button",attrs:{type:"button"},on:{click:t.prevStep}},[t._v(" Back ")]),e("button",{staticClass:"create-account",attrs:{type:"submit"}},[t._v(" Create an Account ")])])]):t._e()])],1),e("p",{staticClass:"signin-text"},[t._v(" Already a member? "),e("router-link",{attrs:{to:"/login"}},[t._v("Sign In")])],1),t.message?e("div",{staticClass:"message"},[t._v(t._s(t.message))]):t._e()])])])},W=[];const G={data(){return{step:1,fullname:"",username:"",email:"",password:"",message:""}},methods:{nextStep(){this.step<4&&this.step++},prevStep(){this.step>1&&this.step--},async submitForm(){this.message="";try{const t=await j.post("/signup",{fullname:this.fullname,username:this.username,email:this.email,password:this.password});t.data.success?(this.message="Signup successful! Redirecting to login page...",setTimeout((()=>{"/login"!==this.$route.path&&this.$router.push("/login")}),2e3)):this.message=t.data.error||"An error occurred. Please try again."}catch(t){this.message=t.response?t.response.data.error:"An error occurred. Please try again."}}}},K=G;var Q=(0,d.A)(K,J,W,!1,null,"595d4059",null);const X=Q.exports;var Z=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v(t._s(t.message))])])},tt=[];const et={data(){return{message:""}},mounted(){const t=localStorage.getItem("token");fetch("/api/data",{headers:{"x-access-token":t}}).then((t=>t.json())).then((t=>{this.message=t.message})).catch((t=>{t.response&&403===t.response.status&&this.$router.push("/login")}))}},st=et;var at=(0,d.A)(st,Z,tt,!1,null,null,null);const rt=at.exports;var ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create-post"},[e("h2",[t._v("Create a New Post")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.createPost.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("Content")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.postData.content,expression:"postData.content"}],attrs:{id:"content",required:"",placeholder:"Enter your post content..."},domProps:{value:t.postData.content},on:{input:function(e){e.target.composing||t.$set(t.postData,"content",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tags"}},[t._v("Tags (comma separated)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.tags,expression:"postData.tags"}],attrs:{type:"text",id:"tags",placeholder:"e.g., tech, news, design"},domProps:{value:t.postData.tags},on:{input:function(e){e.target.composing||t.$set(t.postData,"tags",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image_url"}},[t._v("Image URL")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.image_url,expression:"postData.image_url"}],attrs:{type:"url",id:"image_url",placeholder:"https://example.com/image.jpg"},domProps:{value:t.postData.image_url},on:{input:function(e){e.target.composing||t.$set(t.postData,"image_url",e.target.value)}}})]),e("div",{staticClass:"form-group checkbox-group"},[e("label",{attrs:{for:"is_pinned"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.is_pinned,expression:"postData.is_pinned"}],attrs:{type:"checkbox",id:"is_pinned"},domProps:{checked:Array.isArray(t.postData.is_pinned)?t._i(t.postData.is_pinned,null)>-1:t.postData.is_pinned},on:{change:function(e){var s=t.postData.is_pinned,a=e.target,r=!!a.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);a.checked?n<0&&t.$set(t.postData,"is_pinned",s.concat([o])):n>-1&&t.$set(t.postData,"is_pinned",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.postData,"is_pinned",r)}}}),t._v(" Pin this post ")])]),e("div",{staticClass:"form-group toggle-group"},[e("label",{attrs:{for:"is_anonymous"}},[t._v("Post Anonymously")]),e("label",{staticClass:"lock-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.is_anonymous,expression:"postData.is_anonymous"}],attrs:{type:"checkbox",id:"is_anonymous"},domProps:{checked:Array.isArray(t.postData.is_anonymous)?t._i(t.postData.is_anonymous,null)>-1:t.postData.is_anonymous},on:{change:function(e){var s=t.postData.is_anonymous,a=e.target,r=!!a.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);a.checked?n<0&&t.$set(t.postData,"is_anonymous",s.concat([o])):n>-1&&t.$set(t.postData,"is_anonymous",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.postData,"is_anonymous",r)}}}),t._m(0)])]),e("button",{attrs:{type:"submit"}},[t._v("Create Post")])]),t.message?e("div",{staticClass:"message"},[t._v(t._s(t.message))]):t._e()])},nt=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"slider round"},[e("span",{staticClass:"lock"},[e("span",{staticClass:"lock-body"}),e("span",{staticClass:"lock-shackle"})])])}];const it={data(){return{postData:{content:"",tags:"",image_url:"",is_pinned:!1,is_anonymous:!1},message:""}},methods:{async createPost(){this.message="";try{const t=localStorage.getItem("token"),e={content:this.postData.content,tags:this.postData.tags.split(",").map((t=>t.trim())),image_url:this.postData.image_url,is_pinned:this.postData.is_pinned,is_anonymous:this.postData.is_anonymous};console.log("Payload:",JSON.stringify(e,null,2));const s=await I.A.post("http://127.0.0.1:5000/api/posts",e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log("Response:",s),this.message="Post created successfully!",this.postData={content:"",tags:"",image_url:"",is_pinned:!1,is_anonymous:!1}}catch(t){console.error("Error:",t),t.response?this.message=t.response.data.error:this.message="An error occurred. Please try again."}}}},lt=it;var ct=(0,d.A)(lt,ot,nt,!1,null,"395c11fa",null);const ut=ct.exports;var dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-container"},[e("div",{staticClass:"user-info-container"},[e("img",{staticClass:"avatar-large",attrs:{src:t.avatarUrl,alt:"User Avatar"}}),e("div",{staticClass:"user-details"},[e("h1",{staticClass:"username"},[t._v(t._s(t.user.username||"Anonymous"))]),e("p",{staticClass:"user-bio"},[t._v(t._s(t.user.bio||"No bio available"))])])]),e("div",{staticClass:"profile-nav"},[e("button",{class:{active:"posts"===t.activeTab},on:{click:function(e){t.activeTab="posts"}}},[t._v("Posts")]),e("button",{class:{active:"friends"===t.activeTab},on:{click:function(e){t.activeTab="friends"}}},[t._v("Friends")]),e("button",{class:{active:"potentialFriends"===t.activeTab},on:{click:function(e){t.activeTab="potentialFriends"}}},[t._v("Potential Friends")]),e("button",{class:{active:"settings"===t.activeTab},on:{click:function(e){t.activeTab="settings"}}},[t._v("Settings")])]),"posts"===t.activeTab?e("div",{staticClass:"posts-container"},[e("h2",{staticClass:"section-title"},[t._v("My Posts")]),e("ul",{staticClass:"post-list"},t._l(t.posts,(function(s){return e("li",{key:s.id,staticClass:"post-item"},[s.user?e("div",{staticClass:"post-header"},[e("img",{staticClass:"avatar",attrs:{src:s.user.avatar||"default-avatar.png",alt:"User Avatar"}}),e("div",{staticClass:"user-info"},[e("h3",{staticClass:"username"},[t._v(t._s(s.user.username||"Anonymous"))]),e("p",{staticClass:"post-date"},[t._v(t._s(t.formatDate(s.date)))])])]):t._e(),e("div",{staticClass:"post-content"},[t._v(t._s(s.content))]),e("div",{staticClass:"post-actions"},[e("button",{staticClass:"like-button",on:{click:function(e){return t.likePost(s)}}},[t._v("ð Like")]),e("span",{staticClass:"like-count"},[t._v(t._s(s.likes)+" Likes")]),e("button",{staticClass:"comment-button"},[t._v("ð¬ Comment")]),e("button",{staticClass:"share-button"},[t._v("ð Share")])]),t._m(0,!0)])})),0),0===t.posts.length?e("p",{staticClass:"no-posts"},[t._v("You have no posts.")]):t._e()]):t._e(),"friends"===t.activeTab?e("div",{staticClass:"friends-container"},[e("h2",{staticClass:"section-title"},[t._v("Friends")]),e("ul",{staticClass:"friends-list"},t._l(t.friends,(function(s){return e("li",{key:s.id,staticClass:"friend-item"},[e("img",{staticClass:"avatar-small",attrs:{src:s.avatar||"default-avatar.png",alt:"Friend Avatar"}}),e("div",{staticClass:"friend-info"},[e("h3",{staticClass:"friend-name"},[t._v(t._s(s.username))])])])})),0),0===t.friends.length?e("p",{staticClass:"no-friends"},[t._v("You have no friends.")]):t._e()]):t._e(),"potentialFriends"===t.activeTab?e("div",{staticClass:"potential-friends-container"},[e("h2",{staticClass:"section-title"},[t._v("Potential Friends")]),e("ul",{staticClass:"potential-friends-list"},t._l(t.potentialFriends,(function(s){return e("li",{key:s.id,staticClass:"friend-item"},[e("img",{staticClass:"avatar-small",attrs:{src:s.avatar||"default-avatar.png",alt:"Friend Avatar"}}),e("div",{staticClass:"friend-info"},[e("h3",{staticClass:"friend-name"},[t._v(t._s(s.username))]),e("button",{staticClass:"add-friend-button",on:{click:function(e){return t.sendFriendRequest(s.id)}}},[t._v("Add Friend")])])])})),0),0===t.potentialFriends.length?e("p",{staticClass:"no-friends"},[t._v("No potential friends found.")]):t._e()]):t._e(),"settings"===t.activeTab?e("div",{staticClass:"settings-container"},[e("h2",{staticClass:"section-title"},[t._v("Settings")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.updateSettings.apply(null,arguments)}}},[e("label",{attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"text",id:"username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),e("label",{attrs:{for:"bio"}},[t._v("Bio")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.bio,expression:"user.bio"}],attrs:{id:"bio"},domProps:{value:t.user.bio},on:{input:function(e){e.target.composing||t.$set(t.user,"bio",e.target.value)}}}),e("label",{attrs:{for:"avatar"}},[t._v("Profile Photo")]),e("input",{attrs:{type:"file",id:"avatar"},on:{change:t.onFileChange}}),e("button",{staticClass:"save-button",attrs:{type:"submit"}},[t._v("Save Changes")])])]):t._e(),t.error?e("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e()])},pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-section"},[e("input",{staticClass:"comment-input",attrs:{type:"text",placeholder:"Write a comment..."}})])}];const mt={name:"UserProfile",data(){return{user:{username:"",bio:"",avatar:""},posts:[],friends:[],potentialFriends:[],selectedFile:null,error:null,loading:!0,activeTab:"posts"}},computed:{avatarUrl(){return this.user.avatar?`http://127.0.0.1:5000/uploads/${this.user.avatar}`:"default-avatar.png"}},created(){this.fetchUser(),this.fetchFriends(),this.fetchPotentialFriends()},methods:{async fetchUser(){try{const t=localStorage.getItem("token"),e=await I.A.get("http://127.0.0.1:5000/api/profile",{headers:{Authorization:`Bearer ${t}`}});this.user=e.data,this.posts=e.data.posts}catch(t){console.error("Error fetching user:",t),this.error="Failed to fetch user."}},async fetchFriends(){try{const t=localStorage.getItem("token"),e=await I.A.get("http://127.0.0.1:5000/api/friends",{headers:{Authorization:`Bearer ${t}`}});this.friends=e.data.friends}catch(t){console.error("Error fetching friends:",t),this.error="Failed to fetch friends."}},async fetchPotentialFriends(){try{const t=localStorage.getItem("token"),e=await I.A.get("http://127.0.0.1:5000/api/potential_friends",{headers:{Authorization:`Bearer ${t}`}});this.potentialFriends=e.data.potential_friends}catch(t){console.error("Error fetching potential friends:",t),this.error="Failed to fetch potential friends."}},async sendFriendRequest(t){try{const e=localStorage.getItem("token");await I.A.post("http://127.0.0.1:5000/api/add",{user2_id:t},{headers:{Authorization:`Bearer ${e}`}}),alert("Friend request sent successfully!"),this.potentialFriends=this.potentialFriends.filter((e=>e.id!==t))}catch(e){console.error("Error sending friend request:",e),alert("Failed to send friend request.")}},onFileChange(t){this.selectedFile=t.target.files[0]},async updateSettings(){try{const t=localStorage.getItem("token"),e=new FormData;e.append("username",this.user.username),e.append("bio",this.user.bio),this.selectedFile&&e.append("avatar",this.selectedFile);const s=await I.A.put("http://127.0.0.1:5000/api/profile",e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}});this.user=s.data.user,alert("Settings updated successfully")}catch(t){console.error("Error updating settings:",t),this.error="Failed to update settings."}},formatDate(t){const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)}}},vt=mt;var gt=(0,d.A)(vt,dt,pt,!1,null,"6126385c",null);const ht=gt.exports;var ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"potential-friends-container"},[e("h2",{staticClass:"section-title"},[t._v("Find New Friends")]),e("ul",{staticClass:"potential-friends-list"},t._l(t.potentialFriends,(function(s){return e("li",{key:s.id,staticClass:"potential-friend-item"},[e("img",{staticClass:"avatar-small",attrs:{src:s.avatar||"default-avatar.png",alt:"User Avatar"}}),e("div",{staticClass:"user-info"},[e("h3",{staticClass:"username"},[t._v(t._s(s.name))]),e("button",{staticClass:"add-friend-button",on:{click:function(e){return t.sendFriendRequest(s.id)}}},[t._v("Add Friend")])])])})),0),t.error?e("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e(),t.loading?e("div",{staticClass:"loading-message"},[t._v("Loading...")]):t._e()])},_t=[];const bt={name:"PotentialFriends",data(){return{potentialFriends:[],error:null,loading:!0}},created(){this.fetchPotentialFriends()},methods:{async fetchPotentialFriends(){try{const t=localStorage.getItem("token"),e=await I.A.get("http://127.0.0.1:5000/api/potential_friends",{headers:{Authorization:`Bearer ${t}`}});this.potentialFriends=e.data.potential_friends}catch(t){console.error("Error fetching potential friends:",t),this.error="Failed to fetch potential friends."}finally{this.loading=!1}},async sendFriendRequest(t){try{const e=localStorage.getItem("token");await I.A.post("http://127.0.0.1:5000/api/add",{user2_id:t},{headers:{Authorization:`Bearer ${e}`}}),alert("Friend request sent successfully!"),this.potentialFriends=this.potentialFriends.filter((e=>e.id!==t))}catch(e){console.error("Error sending friend request:",e),alert("Failed to send friend request.")}}}},yt=bt;var Ct=(0,d.A)(yt,ft,_t,!1,null,"3df297ca",null);const wt=Ct.exports;var kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reset-password-request"},[e("h1",[t._v("Reset Password")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email Address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),e("button",{attrs:{type:"submit"}},[t._v("Send Reset Link")])]),t.message?e("p",[t._v(t._s(t.message))]):t._e()])},At=[];const Pt={data(){return{email:"",message:""}},methods:{async submitForm(){this.message="";try{const t=await I.A.post("http://127.0.0.1:5000/api/reset-password-request",{email:this.email});this.message=t.data.message}catch(t){this.message=t.response?t.response.data.message:"An error occurred. Please try again."}}}},Ft=Pt;var xt=(0,d.A)(Ft,kt,At,!1,null,null,null);const Dt=xt.exports;var St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reset-password"},[e("h1",[t._v("Reset Password")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"new-password"}},[t._v("New Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],attrs:{type:"password",id:"new-password",required:""},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]),e("button",{attrs:{type:"submit"}},[t._v("Reset Password")])]),t.message?e("p",[t._v(t._s(t.message))]):t._e()])},$t=[];const qt={data(){return{newPassword:"",message:""}},methods:{async submitForm(){this.message="";const t=this.$route.params.token;try{const e=await I.A.post(`http://127.0.0.1:5000/api/reset-password/${t}`,{new_password:this.newPassword});this.message=e.data.message}catch(e){this.message=e.response?e.response.data.message:"An error occurred. Please try again."}}}},Tt=qt;var Nt=(0,d.A)(Tt,St,$t,!1,null,null,null);const Et=Nt.exports;a["default"].use(l.Ay);const Rt={token:localStorage.getItem("token")||""},Lt={isAuthenticated:t=>!!t.token},Ut={setToken(t,e){t.token=e,localStorage.setItem("token",e)},clearToken(t){t.token="",localStorage.removeItem("token")}},Ot={login({commit:t},e){t("setToken",e)},logout({commit:t}){t("clearToken")}},Mt=new l.Ay.Store({state:Rt,getters:Lt,mutations:Ut,actions:Ot});a["default"].use(F.Ay);const It=[{path:"/",name:"Home",component:q},{path:"/about",name:"About",component:U},{path:"/dashboard",name:"UserDashboard",component:rt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:V},{path:"/signup",name:"Signup",component:X},{path:"/create-post",name:"CreatePost",component:ut,meta:{requiresAuth:!0}},{path:"/profile",name:"UserProfile",component:ht,meta:{requiresAuth:!0}},{path:"/potential-friends",name:"PotentialFriends",component:wt,meta:{requiresAuth:!0}},{path:"/reset-password-request",name:"ResetPasswordRequest",component:Dt},{path:"/reset-password/:token",name:"ResetPassword",component:Et}],Bt=new F.Ay({mode:"history",base:"/",routes:It});Bt.beforeEach(((t,e,s)=>{const a=Mt.getters.isAuthenticated;console.log(`Navigating to ${t.path} from ${e.path}. Logged in: ${a}`),t.matched.some((t=>t.meta.requiresAuth))&&!a?(console.log(`Access to ${t.path} requires auth. Redirecting to login.`),s("/login")):"/login"!==t.path&&"/signup"!==t.path||!a?s():(console.log("Already logged in. Redirecting to dashboard."),s("/dashboard"))}));const jt=Bt;var zt=s(413),Ht=s(625);s(313);a["default"].config.productionTip=!1,a["default"].use(zt.vGs),a["default"].use(Ht.YS),new a["default"]({router:jt,store:Mt,axios:j,render:t=>t(k)}).$mount("#app")}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,s),o.exports}s.m=t,(()=>{var t=[];s.O=(e,a,r,o)=>{if(!a){var n=1/0;for(u=0;u<t.length;u++){for(var[a,r,o]=t[u],i=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(s.O).every((t=>s.O[t](a[l])))?a.splice(l--,1):(i=!1,o<n&&(n=o));if(i){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,r,o]}})(),(()=>{s.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return s.d(e,{a:e}),e}})(),(()=>{s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{s.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={524:0};s.O.j=e=>0===t[e];var e=(e,a)=>{var r,o,[n,i,l]=a,c=0;if(n.some((e=>0!==t[e]))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var u=l(s)}for(e&&e(a);c<n.length;c++)o=n[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(u)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],(()=>s(673)));a=s.O(a)})();
//# sourceMappingURL=app.23555043.js.map