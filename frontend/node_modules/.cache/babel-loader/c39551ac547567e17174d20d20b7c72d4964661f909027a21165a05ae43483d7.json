{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      title: '',\n      summary: '',\n      content: '',\n      tags: '',\n      category: '',\n      image_url: '',\n      imageFile: null,\n      message: '',\n      isError: false\n    };\n  },\n  methods: {\n    handleImageUpload(event) {\n      this.imageFile = event.target.files[0];\n      console.log(`Image file selected: ${this.imageFile.name}`);\n    },\n    async submitPost() {\n      console.log('Submitting post...');\n      try {\n        const token = localStorage.getItem('token');\n        console.log(`Token: ${token}`);\n        let imageUrl = this.image_url;\n        if (this.imageFile) {\n          console.log('Uploading image...');\n          const formData = new FormData();\n          formData.append('image', this.imageFile);\n          const uploadResponse = await axios.post('http://localhost:5000/api/upload', formData, {\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          console.log('Image uploaded:', uploadResponse.data);\n          imageUrl = uploadResponse.data.imageUrl;\n        }\n        console.log('Creating post...');\n        const response = await axios.post('http://localhost:5000/api/posts', {\n          title: this.title,\n          summary: this.summary,\n          content: this.content,\n          tags: this.tags.split(','),\n          category: this.category,\n          image_url: imageUrl\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        console.log('Post created:', response.data);\n        if (response && response.data) {\n          this.message = 'Post created successfully!';\n          this.isError = false;\n          this.clearForm();\n        } else {\n          throw new Error('No data in response');\n        }\n      } catch (error) {\n        console.error('Error creating post:', error.response?.data || error.message);\n        this.message = error.response?.data?.error || 'An error occurred while creating the post.';\n        this.isError = true;\n      }\n    },\n    clearForm() {\n      console.log('Clearing form...');\n      this.title = '';\n      this.summary = '';\n      this.content = '';\n      this.tags = '';\n      this.category = '';\n      this.image_url = '';\n      this.imageFile = null;\n    }\n  }\n};","map":{"version":3,"names":["axios","data","title","summary","content","tags","category","image_url","imageFile","message","isError","methods","handleImageUpload","event","target","files","console","log","name","submitPost","token","localStorage","getItem","imageUrl","formData","FormData","append","uploadResponse","post","headers","response","split","clearForm","Error","error"],"sources":["src/components/CreatePost.vue"],"sourcesContent":["<template>\r\n  <div class=\"create-post-container\">\r\n    <h2>Create a New Post</h2>\r\n    <form @submit.prevent=\"submitPost\">\r\n      <div>\r\n        <label for=\"title\">Title:</label>\r\n        <input type=\"text\" v-model=\"title\" required />\r\n      </div>\r\n      <div>\r\n        <label for=\"summary\">Summary:</label>\r\n        <textarea v-model=\"summary\" placeholder=\"Optional summary of the post\"></textarea>\r\n      </div>\r\n      <div>\r\n        <label for=\"content\">Content:</label>\r\n        <textarea v-model=\"content\" required></textarea>\r\n      </div>\r\n      <div>\r\n        <label for=\"tags\">Tags:</label>\r\n        <input type=\"text\" v-model=\"tags\" placeholder=\"Comma-separated tags\" />\r\n      </div>\r\n      <div>\r\n        <label for=\"category\">Category:</label>\r\n        <select v-model=\"category\" required>\r\n          <option disabled value=\"\">Please select a category</option>\r\n          <option value=\"tech\">Tech</option>\r\n          <option value=\"health\">Health</option>\r\n          <option value=\"lifestyle\">Lifestyle</option>\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label for=\"image_url\">Image URL:</label>\r\n        <input type=\"text\" v-model=\"image_url\" />\r\n      </div>\r\n      <div>\r\n        <label for=\"image\">Upload Image:</label>\r\n        <input type=\"file\" @change=\"handleImageUpload\" />\r\n      </div>\r\n      <button type=\"submit\">Create Post</button>\r\n    </form>\r\n    <div v-if=\"message\" :class=\"{'error-message': isError, 'success-message': !isError}\">\r\n      {{ message }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: '',\r\n      summary: '',\r\n      content: '',\r\n      tags: '',\r\n      category: '',\r\n      image_url: '',\r\n      imageFile: null,\r\n      message: '',\r\n      isError: false,\r\n    };\r\n  },\r\n  methods: {\r\n    handleImageUpload(event) {\r\n      this.imageFile = event.target.files[0];\r\n      console.log(`Image file selected: ${this.imageFile.name}`);\r\n    },\r\n    async submitPost() {\r\n      console.log('Submitting post...');\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        console.log(`Token: ${token}`);\r\n        let imageUrl = this.image_url;\r\n\r\n        if (this.imageFile) {\r\n          console.log('Uploading image...');\r\n          const formData = new FormData();\r\n          formData.append('image', this.imageFile);\r\n          const uploadResponse = await axios.post('http://localhost:5000/api/upload', formData, {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          });\r\n          console.log('Image uploaded:', uploadResponse.data);\r\n          imageUrl = uploadResponse.data.imageUrl;\r\n        }\r\n\r\n        console.log('Creating post...');\r\n        const response = await axios.post('http://localhost:5000/api/posts', {\r\n          title: this.title,\r\n          summary: this.summary,\r\n          content: this.content,\r\n          tags: this.tags.split(','),\r\n          category: this.category,\r\n          image_url: imageUrl\r\n        }, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        console.log('Post created:', response.data);\r\n        if (response && response.data) {\r\n          this.message = 'Post created successfully!';\r\n          this.isError = false;\r\n          this.clearForm();\r\n        } else {\r\n          throw new Error('No data in response');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error creating post:', error.response?.data || error.message);\r\n        this.message = error.response?.data?.error || 'An error occurred while creating the post.';\r\n        this.isError = true;\r\n      }\r\n    },\r\n    clearForm() {\r\n      console.log('Clearing form...');\r\n      this.title = '';\r\n      this.summary = '';\r\n      this.content = '';\r\n      this.tags = '';\r\n      this.category = '';\r\n      this.image_url = '';\r\n      this.imageFile = null;\r\n    }\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style>\r\n.create-post-container {\r\n  max-width: 600px;\r\n  margin: auto;\r\n}\r\n\r\n.error-message {\r\n  color: red;\r\n}\r\n\r\n.success-message {\r\n  color: green;\r\n}\r\n</style>\r\n"],"mappings":"AA+CA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,OAAA;MACAC,OAAA;MACAC,IAAA;MACAC,QAAA;MACAC,SAAA;MACAC,SAAA;MACAC,OAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,kBAAAC,KAAA;MACA,KAAAL,SAAA,GAAAK,KAAA,CAAAC,MAAA,CAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,8BAAAT,SAAA,CAAAU,IAAA;IACA;IACA,MAAAC,WAAA;MACAH,OAAA,CAAAC,GAAA;MACA;QACA,MAAAG,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAN,OAAA,CAAAC,GAAA,WAAAG,KAAA;QACA,IAAAG,QAAA,QAAAhB,SAAA;QAEA,SAAAC,SAAA;UACAQ,OAAA,CAAAC,GAAA;UACA,MAAAO,QAAA,OAAAC,QAAA;UACAD,QAAA,CAAAE,MAAA,eAAAlB,SAAA;UACA,MAAAmB,cAAA,SAAA3B,KAAA,CAAA4B,IAAA,qCAAAJ,QAAA;YACAK,OAAA;cACA,2BAAAT,KAAA;cACA;YACA;UACA;UACAJ,OAAA,CAAAC,GAAA,oBAAAU,cAAA,CAAA1B,IAAA;UACAsB,QAAA,GAAAI,cAAA,CAAA1B,IAAA,CAAAsB,QAAA;QACA;QAEAP,OAAA,CAAAC,GAAA;QACA,MAAAa,QAAA,SAAA9B,KAAA,CAAA4B,IAAA;UACA1B,KAAA,OAAAA,KAAA;UACAC,OAAA,OAAAA,OAAA;UACAC,OAAA,OAAAA,OAAA;UACAC,IAAA,OAAAA,IAAA,CAAA0B,KAAA;UACAzB,QAAA,OAAAA,QAAA;UACAC,SAAA,EAAAgB;QACA;UACAM,OAAA;YACA,2BAAAT,KAAA;UACA;QACA;QAEAJ,OAAA,CAAAC,GAAA,kBAAAa,QAAA,CAAA7B,IAAA;QACA,IAAA6B,QAAA,IAAAA,QAAA,CAAA7B,IAAA;UACA,KAAAQ,OAAA;UACA,KAAAC,OAAA;UACA,KAAAsB,SAAA;QACA;UACA,UAAAC,KAAA;QACA;MACA,SAAAC,KAAA;QACAlB,OAAA,CAAAkB,KAAA,yBAAAA,KAAA,CAAAJ,QAAA,EAAA7B,IAAA,IAAAiC,KAAA,CAAAzB,OAAA;QACA,KAAAA,OAAA,GAAAyB,KAAA,CAAAJ,QAAA,EAAA7B,IAAA,EAAAiC,KAAA;QACA,KAAAxB,OAAA;MACA;IACA;IACAsB,UAAA;MACAhB,OAAA,CAAAC,GAAA;MACA,KAAAf,KAAA;MACA,KAAAC,OAAA;MACA,KAAAC,OAAA;MACA,KAAAC,IAAA;MACA,KAAAC,QAAA;MACA,KAAAC,SAAA;MACA,KAAAC,SAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}